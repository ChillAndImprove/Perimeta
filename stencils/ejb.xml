<shapes name="mxgraph.servers"> <!-- Or mxgraph.java, mxgraph.compute -->

<shape name="ejb" aspect="fixed" w="190" h="190" strokewidth="1">
    <connections/>
    <foreground>
        <!-- 1. Background Rectangle - SCALED Consistent Style -->
        <save/>
        <strokecolor color="#85C1E9"/>
        <fillcolor color="#D6EAF8"/>
        <strokewidth width="5"/>
        <roundrect x="0" y="0" w="190" h="190" arcsize="13"/>
        <fillstroke/>
        <restore/>

        <!-- 2. Base Application Server Box - SCALED -->
        <save/>
        <strokecolor color="#424949"/>
        <fillcolor color="#ABB2B9"/>
        <strokewidth width="3"/>
        <!-- Centered vertical rectangle -->
        <rect x="40" y="32" w="111" h="127"/>
        <fillstroke/>
        <restore/>

        <!-- 3. Processing Symbol (Gear) - Part of App Server Context -->
        <save/>
        <strokecolor color="#AF601A"/> <!-- Brownish-Orange Border -->
        <fillcolor color="#F5B041"/>   <!-- Lighter Orange Fill -->
        <strokewidth width="2.5"/>
        <!-- Positioned slightly left-of-center within the server box -->
        <!-- Gear Center approx: x=75, y=95.5 -->
        <ellipse x="55" y="75.5" w="40" h="40"/>
        <fillstroke/>
        <!-- Inner Cutout -->
        <ellipse x="67.5" y="88" w="15" h="15">
             <fillcolor color="#ABB2B9"/> <!-- Match server box fill -->
             <strokecolor color="#AF601A"/> <strokewidth width="1"/>
        </ellipse>
        <fillstroke/>
        <!-- Teeth (Simplified) -->
        <strokewidth width="3.5"/>
        <path> <move x="75" y="75.5"/> <line x="75" y="69.5"/> </path> <stroke/> <!-- Top -->
        <path> <move x="95" y="95.5"/> <line x="101" y="95.5"/> </path> <stroke/> <!-- Right -->
        <path> <move x="75" y="115.5"/> <line x="75" y="121.5"/> </path> <stroke/> <!-- Bottom -->
        <path> <move x="55" y="95.5"/> <line x="49" y="95.5"/> </path> <stroke/> <!-- Left -->
        <restore/> <!-- Restore state after gear -->

        <!-- 4. EJB 'Bean' Symbol (Capsule) -->
        <save/>
        <strokecolor color="#145A32"/> <!-- Dark Green Border -->
        <fillcolor color="#A9DFBF"/>   <!-- Light Green Fill -->
        <strokewidth width="2.5"/>
        <!-- Positioned slightly right-of-center within the server box -->
        <!-- Height=30, Width=20 -->
        <!-- Arcsize >= height/2 makes it a capsule -->
        <roundrect x="106" y="80.5" w="20" h="30" arcsize="15"/>
        <fillstroke/>
        <restore/> <!-- Restore state after bean symbol -->

    </foreground>
</shape>

</shapes>
